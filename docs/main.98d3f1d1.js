!function(c){function e(e){for(var t,r,a=e[0],n=e[1],o=e[2],i=0,s=[];i<a.length;i++)r=a[i],Object.prototype.hasOwnProperty.call(u,r)&&u[r]&&s.push(u[r][0]),u[r]=0;for(t in n)Object.prototype.hasOwnProperty.call(n,t)&&(c[t]=n[t]);for(d&&d(e);s.length;)s.shift()();return f.push.apply(f,o||[]),l()}function l(){for(var e,t=0;t<f.length;t++){for(var r=f[t],a=!0,n=1;n<r.length;n++){var o=r[n];0!==u[o]&&(a=!1)}a&&(f.splice(t--,1),e=i(i.s=r[0]))}return e}var r={},u={0:0},f=[];function i(e){if(r[e])return r[e].exports;var t=r[e]={i:e,l:!1,exports:{}};return c[e].call(t.exports,t,t.exports,i),t.l=!0,t.exports}i.m=c,i.c=r,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(r,a,function(e){return t[e]}.bind(null,a));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var t=window.webpackJsonp=window.webpackJsonp||[],a=t.push.bind(t);t.push=e,t=t.slice();for(var n=0;n<t.length;n++)e(t[n]);var d=a;f.push([78,1]),l()}({122:function(e,t,r){},123:function(e,t,r){},124:function(e,t,r){},125:function(e,t,r){},126:function(e,t,r){"use strict";r.r(t);var w=r(0),N=r.n(w),a=r(76),n=r.n(a),o=(r(27),r(30),r(37),r(32),r(35),r(45),r(93),r(101),r(102),r(44),r(105),r(107),r(77)),d=r.n(o);function h(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,a)}return r}function v(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var k=function(){function r(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this._offset=0,this._dv=new DataView(e),this.name=t,this.frames=[],this.layers=[],this.tags=[],this.fileSize,this.numFrames,this.width,this.height,this.colorDepth,this.numColors,this.pixelRatio}return function(e,t,r){t&&i(e.prototype,t),r&&i(e,r)}(r,[{key:"readNextByte",value:function(){var e=this._dv.getUint8(this._offset,!0);return this._offset+=1,e}},{key:"readByte",value:function(e){return this._dv.getUint8(e,!0)}},{key:"readNextWord",value:function(){var e=this._dv.getUint16(this._offset,!0);return this._offset+=2,e}},{key:"readWord",value:function(e){return this._dv.getUint16(e,!0)}},{key:"readNextShort",value:function(){var e=this._dv.getInt16(this._offset,!0);return this._offset+=2,e}},{key:"readShort",value:function(e){return this._dv.getInt16(e,!0)}},{key:"readNextDWord",value:function(){var e=this._dv.getUint32(this._offset,!0);return this._offset+=4,e}},{key:"readDWord",value:function(e){return this._dv.getUint32(e,!0)}},{key:"readNextLong",value:function(){var e=this._dv.getInt32(this._offset,!0);return this._offset+=4,e}},{key:"readLong",value:function(e){return this._dv.getInt32(e,!0)}},{key:"readNextFixed",value:function(){var e=this._dv.getFloat32(this._offset,!0);return this._offset+=4,e}},{key:"readFixed",value:function(e){return this._dv.getFloat32(e,!0)}},{key:"readNextBytes",value:function(e){for(var t=new ArrayBuffer(e),r=new DataView(t),a=0;a<e;a++)r.setUint8(a,this.readNextByte());return this.Utf8ArrayToStr(new Uint8Array(t))}},{key:"readNextRawBytes",value:function(e){for(var t=new ArrayBuffer(e),r=new DataView(t),a=0;a<e;a++)r.setUint8(a,this.readNextByte());return new Uint8Array(t)}},{key:"readRawBytes",value:function(e,t,r){for(var a=new ArrayBuffer(e-r),n=new DataView(a),o=0;o<e-r;o++)n.setUint8(o,t.getUint8(r+o,!0));return new Uint8Array(a)}},{key:"readNextString",value:function(){var e=this.readNextWord();return this.readNextBytes(e)}},{key:"skipBytes",value:function(e){this._offset+=e}},{key:"Utf8ArrayToStr",value:function(e){var t,r,a,n,o,i;for(t="",a=e.length,r=0;r<a;)switch((n=e[r++])>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:t+=String.fromCharCode(n);break;case 12:case 13:o=e[r++],t+=String.fromCharCode((31&n)<<6|63&o);break;case 14:o=e[r++],i=e[r++],t+=String.fromCharCode((15&n)<<12|(63&o)<<6|(63&i)<<0)}return t}},{key:"readHeader",value:function(){this.fileSize=this.readNextDWord(),this.readNextWord(),this.numFrames=this.readNextWord(),this.width=this.readNextWord(),this.height=this.readNextWord(),this.colorDepth=this.readNextWord(),this.skipBytes(18),this.numColors=this.readNextWord();var e=this.readNextByte(),t=this.readNextByte();return this.pixelRatio="".concat(e,":").concat(t),this.skipBytes(92),this.numFrames}},{key:"readFrame",value:function(){var e=this.readNextDWord();this.skipBytes(2);var t=this.readNextWord(),r=this.readNextWord();this.skipBytes(2);var a=this.readNextDWord();console.log({bytesInFrame:e,oldChunk:t,frameDuration:r,newChunk:a});for(var n=[],o=0;o<a;o++){var i=this.readChunk();switch(i.type){case 4:case 8198:case 17:case 8214:case 8215:case 8224:case 8226:this.skipBytes(i.chunkSize-6);break;case 8196:console.log("Layer"),this.readLayerChunk();break;case 8197:console.log("Cel");var s=this.readCelChunk(i.chunkSize);n.push(s);break;case 8199:this.readColorProfileChunk();break;case 8216:this.readFrameTagsChunk();break;case 8217:console.log("Palette"),this.palette=this.readPaletteChunk()}}this.frames.push({bytesInFrame:e,frameDuration:r,numChunks:a,cels:n})}},{key:"readColorProfileChunk",value:function(){var e=this.readNextWord(),t=this.readNextWord(),r=this.readNextFixed();this.skipBytes(8),console.log({type:e,flag:t,fGamma:r}),this.colorProfile={type:e,flag:t,fGamma:r}}},{key:"readPaletteChunk",value:function(){var e=this.readNextDWord(),t=this.readNextDWord(),r=this.readNextDWord();this.skipBytes(8);for(var a=[],n=0;n<e;n++){var o=this.readNextWord(),i=this.readNextByte(),s=this.readNextByte(),c=this.readNextByte(),l=this.readNextByte(),u=void 0;1===o&&(u=this.readNextString()),a.push({red:i,green:s,blue:c,alpha:l,name:void 0!==u?u:"none"})}return console.log({paletteSize:e,firstColor:t,secondColor:r,colors:a}),{paletteSize:e,firstColor:t,lastColor:r,colors:a}}},{key:"readLayerChunk",value:function(){var e=this.readNextWord(),t=this.readNextWord(),r=this.readNextWord();this.skipBytes(4);var a=this.readNextWord(),n=this.readNextByte();this.skipBytes(3);var o=this.readNextString();this.layers.push({flags:e,type:t,layerChildLevel:r,blendMode:a,opacity:n,name:o}),console.log({flags:e,type:t,layerChildLevel:r,blendMode:a,opacity:n,name:o})}},{key:"readCelChunk",value:function(e){var t=this.readNextWord(),r=this.readNextShort(),a=this.readNextShort(),n=this.readNextByte(),o=this.readNextWord();this.skipBytes(7),console.log(this._offset);var i,s,c,l,u,f={};return 1!==o?(i=this.readNextWord(),s=this.readNextWord(),c=this.readNextRawBytes(e-26),2===o?l=d.a.inflate(c):0===o&&(l=c)):u=this.readNextWord(),void 0!==i?(f.w=i,f.h=s,f.rawCelData=l):f.linkedFrame=u,console.log({layerIndex:t,x:r,y:a,opacity:n,celType:o,w:i,h:s}),function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?h(r,!0).forEach(function(e){v(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):h(r).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}({layerIndex:t,xpos:r,ypos:a,opacity:n,celType:o},f)}},{key:"readChunk",value:function(){var e=this.readNextDWord(),t=this.readNextWord();return console.log({cSize:e,type:t}),{chunkSize:e,type:t}}},{key:"readFrameTagsChunk",value:function(){var e=["Forward","Reverse","Ping-pong"],t=this.readNextWord();this.skipBytes(8);for(var r=0;r<t;r++){var a={};a.from=this.readNextWord(),a.to=this.readNextWord();var n=this.readNextByte();a.animDirection=e[n],this.skipBytes(8),a.color=this.readNextRawBytes(3).toString("hex"),this.skipBytes(1),a.name=this.readNextString(),this.tags.push(a)}}},{key:"parse",value:function(){for(var e=this.readHeader(),t=0;t<e;t++)this.readFrame()}}]),r}();r(122);function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var r=[],a=!0,n=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(a=(i=s.next()).done)&&(r.push(i.value),!t||r.length!==t);a=!0);}catch(e){n=!0,o=e}finally{try{a||null==s.return||s.return()}finally{if(n)throw o}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function C(t){function e(){var e=t.colors[a];return"".concat(e.red.toString(16)).concat(e.green.toString(16)).concat(e.blue.toString(16))}var r=s(Object(w.useState)(0),2),a=r[0],n=r[1],o=t.colors.map(function(e,t){return N.a.createElement("div",{key:"color_".concat(t),className:"ase-palette-color ".concat(t===a?"active-color":""),style:{background:"rgba(".concat(e.red,", ").concat(e.green,", ").concat(e.blue,", ").concat(e.alpha,")")},onClick:function(){return function(e){n(e)}(t)}},N.a.createElement("div",{className:"ase-palette-hover"},N.a.createElement("span",{className:"ase-palette-hover-color",style:{background:"rgba(".concat(e.red,", ").concat(e.green,", ").concat(e.blue,", ").concat(e.alpha,")")}}),N.a.createElement("span",{className:"ase-palette-hover-red"},"r: ".concat(e.red)),N.a.createElement("span",{className:"ase-palette-hover-green"},"g: ".concat(e.green)),N.a.createElement("span",{className:"ase-palette-hover-blue"},"b: ".concat(e.blue)),N.a.createElement("span",{className:"ase-palette-hover-alpha"},"a: ".concat(e.alpha))))});return N.a.createElement("div",{className:"ase-palette"},o,N.a.createElement("div",{className:"ase-palette-active"},N.a.createElement("div",{className:"ase-palette-active-preview",style:{background:"#".concat(e())}}),N.a.createElement("div",{className:"ase-palette-active-hex"},"#".concat(e())),N.a.createElement("div",{className:"ase-palette-active-alpha"},"Alpha: ".concat(t.colors[a].alpha))))}r(123);function c(e,t,r,a,n,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(a,n)}function S(s){return function(){var e=this,i=arguments;return new Promise(function(t,r){var a=s.apply(e,i);function n(e){c(a,t,r,n,o,"next",e)}function o(e){c(a,t,r,n,o,"throw",e)}n(void 0)})}}function B(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var r=[],a=!0,n=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(a=(i=s.next()).done)&&(r.push(i.value),!t||r.length!==t);a=!0);}catch(e){n=!0,o=e}finally{try{a||null==s.return||s.return()}finally{if(n)throw o}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function l(n){var a,o,e=B(Object(w.useState)({}),2),i=e[0],s=e[1],t=B(Object(w.useState)(null),2),c=t[0],l=t[1],u=Object(w.useRef)(null),f=Object(w.useRef)(null),d={},r=function(){var t=S(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(r=new FileReader).onload=function(){var t=S(regeneratorRuntime.mark(function e(t){var r,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(r=new k(t.target.result,n.name)).parse(),(a=u.current.getContext("2d")).canvas.width=800,a.canvas.height=600,d.x=400,d.y=300,b(a),s(r),l(0);case 10:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}(),r.readAsArrayBuffer(t);case 3:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}();function h(e){var t=i.frames[c].cels[e];if(console.log(t),void 0===t.linkedFrame){var r=u.current.getContext("2d"),a=f.current.getContext("2d");a.clearRect(0,0,f.width,f.height),a.width=i.width,a.height=i.height;for(var n=a.createImageData(t.w,t.h),o=0;o<t.rawCelData.byteLength;o++)n.data[o]=t.rawCelData[o];a.putImageData(n,t.xpos,t.ypos),r.drawImage(f.current,0,0)}}function v(){var e=u.current.getContext("2d");e.imageSmoothingEnabled=!1,e.scale(1,1),m()}function p(e){var t=u.current.getContext("2d"),r=t.transformedPoint(d.x,d.y);t.translate(r.x,r.y);var a=Math.pow(1.1,e);t.scale(a,a),t.translate(-r.x,-r.y),v()}Object(w.useEffect)(function(){r(n.file)},[n.file]),Object(w.useEffect)(function(){void 0!==i.name&&(g(),x(),m())},[c]);var y,m=function(){var e=u.current.getContext("2d");e.save(),g(),e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,u.current.width,u.current.height),x(),e.restore();for(var t=i.frames[c].cels.length,r=0;r<t;r++)h(r)},g=function(){var e=u.current.getContext("2d"),t=e.transformedPoint(0,0),r=e.transformedPoint(u.width,u.height);e.clearRect(t.x,t.y,r.x-t.x,r.y-t.y)},x=function(){f.current.getContext("2d").clearRect(0,0,i.width,i.height)},b=function(s){var c=document.createElementNS("http://www.w3.org/2000/svg","svg"),l=c.createSVGMatrix();s.getTransform=function(){return l};var e=[],t=s.save;s.save=function(){return e.push(l.translate(0,0)),t.call(s)};var r=s.restore;s.restore=function(){return l=e.pop(),r.call(s)};var a=s.scale;s.scale=function(e,t){return l=l.scaleNonUniform(e,t),a.call(s,e,t)};var n=s.rotate;s.rotate=function(e){return l=l.rotate(180*e/Math.PI),n.call(s,e)};var o=s.translate;s.translate=function(e,t){return l=l.translate(e,t),o.call(s,e,t)};var u=s.transform;s.transform=function(e,t,r,a,n,o){var i=c.createSVGMatrix();return i.a=e,i.b=t,i.c=r,i.d=a,i.e=n,i.f=o,l=l.multiply(i),u.call(s,e,t,r,a,n,o)};var i=s.setTransform;s.setTransform=function(e,t,r,a,n,o){return l.a=e,l.b=t,l.c=r,l.d=a,l.e=n,l.f=o,i.call(s,e,t,r,a,n,o)};var f=c.createSVGPoint();s.transformedPoint=function(e,t){return f.x=e,f.y=t,f.matrixTransform(l.inverse())}};return void 0!==i.name&&(y=N.a.createElement(C,{colors:i.palette.colors})),N.a.createElement("div",{className:"ase-preview-container"},void 0!==i.name?N.a.createElement("span",{className:"ase-preview-file-info"},"".concat(i.name," ").concat(function(e,t){if(0===e)return"0 Byte";var r=t+1||3,a=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,a)).toFixed(r))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][a]}(i.fileSize,2))):"",N.a.createElement("canvas",{ref:f,style:{display:"none"}}),N.a.createElement("div",{className:"ase-preview-image"},N.a.createElement("div",{className:"ase-palette-container"},y),N.a.createElement("div",{className:"ase-preview-image-view"},N.a.createElement("canvas",{className:"",ref:u,onWheel:function(e){!function(e){console.log(1),console.log("DeltaX: ",e.deltaX," DeltaY: ",e.deltaY," DeltaZ: ",e.deltaZ);var t=e.deltaY?e.deltaY/40:0;t&&p(t)}(e)},onMouseDown:function(e){!function(e){var t=u.current.getContext("2d");d.x=e.offsetX||e.pageX-u.current.offsetLeft,d.y=e.offsetY||e.pageY-u.current.offsetTop,a=t.transformedPoint(d.x,d.y),o=!1}(e)},onMouseMove:function(e){!function(e){var t=u.current.getContext("2d");if(null!=a){d.x=e.offsetX||e.pageX-u.current.offsetLeft,d.y=e.offsetY||e.pageY-u.current.offsetTop,o=!0;var r=t.transformedPoint(d.x,d.y);t.translate(r.x-a.x,r.y-a.y),v()}}(e)},onMouseUp:function(e){!function(e){a=null,o||p(e.shiftKey?-1:1)}(e)}}))),N.a.createElement("div",{className:"ase-preview-timeline"},N.a.createElement("div",{className:"ase-preview-frames"},void 0!==i.name?i.frames.map(function(e,t){return N.a.createElement("div",{key:"frame_".concat(t),className:"ase-preview-frame ".concat(t===c?"active":""),onClick:function(){return function(e){l(e)}(t)}},"".concat(t+1))}):"")))}r(124);function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var r=[],a=!0,n=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(a=(i=s.next()).done)&&(r.push(i.value),!t||r.length!==t);a=!0);}catch(e){n=!0,o=e}finally{try{a||null==s.return||s.return()}finally{if(n)throw o}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function f(e){var t,r=Object(w.useRef)(null),a=u(Object(w.useState)([]),2),n=a[0],o=a[1];return 0<n.length&&(t=N.a.createElement(l,{key:n[0].name,name:n[0].name,file:n[0]})),N.a.createElement(N.a.Fragment,null,N.a.createElement("div",{className:"file-upload-wrapper"},N.a.createElement("button",{className:"file-upload-button",onClick:function(){r.current.click()},onDrop:function(e){return function(e){e.stopPropagation(),e.preventDefault(),r.current.onDrop(e)}(e)}},e.text),N.a.createElement("input",{accept:e.accept,ref:r,type:"file",multiple:e.multiple,name:e.name,onChange:function(e){return function(e){for(var t=e.target.files,r=t.length,a=[],n=0;n<r;n++)a.push(t[n]);o(a)}(e)}})),t)}function p(e){return N.a.createElement("div",null,N.a.createElement(f,{preview:!0,accept:".ase, .aseprite",name:"file",text:"Upload a file"}))}r(125);n.a.render(N.a.createElement(p,null),document.getElementById("root"))},78:function(e,t,r){e.exports=r(126)}});